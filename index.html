<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title></title>
<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
<base target="_blank">
<link rel="stylesheet" type="text/css" href="./Qgis2threejs.css">
<script src="./threejs/three.min.js"></script>
<script src="./threejs/OrbitControls.js"></script>
<script src="./threejs/ViewHelper.js"></script>
<script src="./threejs/OutlineEffect.js"></script>
<script src="./tweenjs/tween.js"></script>
<script src="./Qgis2threejs.js"></script>
<script src="./dat-gui/dat.gui.min.js"></script>
<script src="./dat-gui_panel.js"></script>

<style>
  /* Add styling for your header, footer, popup, etc. as before */
</style>

</head>
<body>
<div id="view">
  <div id="northarrow"></div>
  <div id="navigation"></div>
</div>

<!-- popup -->
<div id="popup">
  <!-- Your popup content goes here -->
</div>

<!-- progress bar -->
<div id="progress"><div id="progressbar"></div></div>

<!-- header and footer -->
<div id="header">DIMBHE DAM</div>
<div id="footer">Created By: Onkar Keskar Blueleap Consultancy (Educational Purpose only)</div>

<!-- animation -->
<div id="narrativebox" class="ef1">
  <div id="narbody">
  </div>
  <div id="nextbtn"></div>
</div>

<script>
// Ensure to replace the API key below with your actual Google Maps API key
var googleMapsAPIKey = 'YOUR_GOOGLE_MAPS_API_KEY'; 

// Load Google Maps tile layer
function createGoogleSatelliteLayer() {
  var satelliteUrl = `https://mt1.google.com/vt/lyrs=s&x={x}&y={y}&z={z}`; // Hybrid style (Satellite with Labels)

  var loader = new THREE.TextureLoader();
  loader.load(satelliteUrl, function(texture) {
    // Create a plane geometry with the satellite image texture
    var planeGeometry = new THREE.PlaneGeometry(500, 500, 256, 256);  // Customize the size (500, 500)
    var material = new THREE.MeshBasicMaterial({ map: texture, side: THREE.DoubleSide });
    var plane = new THREE.Mesh(planeGeometry, material);
    plane.rotation.x = -Math.PI / 2;  // Rotate the plane to be horizontal
    plane.position.set(0, 0, 0);  // Position at the center

    // Add the plane to your scene
    app.scene.add(plane);
  });
}

var container = document.getElementById("view"),
    app = Q3D.application,
    gui = Q3D.gui;

app.init(container);    // Initialize viewer

// Load the scene
app.loadSceneFile("./data/index/scene.js", function (scene) {
  // Scene file has been loaded
  app.start();
  gui.dat.initLayersFolder(scene);

  // Add Google Satellite Layer after the scene loads
  createGoogleSatelliteLayer();
}, function (scene) {
  // All relevant files have been loaded

  if (Q3D.Config.gui.customPlane) {
    // Specify preferred values for custom plane
    var zMin = undefined,
        zMax = undefined;
    gui.dat.initCustomPlaneFolder(zMin, zMax);
  }
});
</script>

</body>
</html>
